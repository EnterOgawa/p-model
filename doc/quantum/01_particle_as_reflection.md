# Step 7.1：波の反射としての粒子（内部構造の再解釈）

目的：
- Phase 7（量子）へ進むための最初の足場として、「粒子＝束縛波」を **“反射（境界条件）”** の言葉で最小モデル化し、どこまでが比喩でどこからが仕様（数式）かを切り分ける。
- 次の Step 7.2–7.4（相関生成／もつれ再解釈／ベルテスト）で必要となる「検出イベント」「時刻タグ」「選別」の議論を、力学（波の内部モード）側から接続できる形にする。

前提（既存資料への接続）：
- 「物質＝波」の整理：`doc/theory/01_all_matter_is_wave.md`
- 直感（内部反射としての粒子像）と安全な翻訳：`doc/theory/02_inspiration_qc_and_mass_defect.md`
- 量子場 vs 古典波：`doc/theory/03_quantum_field_vs_classical_wave.md`

---

## 1. このStepで言う「反射」とは

ここでの「反射」は、硬い壁での鏡反射そのものを主張するのではなく、

- **境界条件（boundary condition）**
- **モードの離散化（共鳴条件）**
- **局在した安定パターン（束縛状態）**

をまとめて表すための短い言葉として使う。

直感は次の形に弱めて固定するのが安全である：

- 粒子（物質）は **自由に広がる波（自由波）** ではなく、内部自由度が閉じた **束縛波（安定モード）**である。
- その束縛波は、境界条件（あるいは自己無撞着条件）により **固有モード**を持ち、周波数・波数が離散化される。
- 外部との相互作用（散乱・吸収・放出）は、束縛波のモード遷移として現れる。

この段階では「何が反射するか（基礎場）」と「なぜ境界条件が成立するか（安定機構）」は未確定としてよい。
まずは **“束縛＝離散化＝粒子的振る舞い”**の骨格を、再現可能な最小モデルで示す。

---

## 2. 最小モデル：1次元の箱（反射境界）と固有モード

1次元区間 [0, L] に波 u(x,t) を置き、端点で

- 固定端：u(0,t)=u(L,t)=0

の境界条件を課すと、固有モードは

$$
u_n(x,t) \\propto \\sin\\left(\\frac{n\\pi x}{L}\\right)\\,\\cos(\\omega_n t+\\varphi)
$$

の形になり、波数は k_n=nπ/L（n=1,2,3,...）へ離散化される。

重要なのは、離散化の理由が「量子という不思議」ではなく、まず

- **反射（境界条件）**
- **位相整合（共鳴条件）**

で説明できる点である。

もちろん現実の粒子は 3次元・スピン・相互作用を持つため、このモデルは比喩に近い。
しかし「束縛状態→離散スペクトル→遷移で放射」という構造は、次段の議論に必要な共通骨格を与える。

---

## 3. デモ（再現可能）：反射でモードが離散化し、波束が反射する

このリポジトリでは、上の最小モデルを「再現可能な図」として固定する。

- スクリプト：`scripts/quantum/particle_reflection_demo.py`
- 出力：
  - `output/quantum/particle_reflection_demo.png`
  - `output/quantum/particle_reflection_demo_metrics.json`

再現（Windows）：
- `python -B scripts/quantum/particle_reflection_demo.py`

---

## 4. P-model への接続（このStepの立場）

P-model は、まず「重力・時計・光伝播」を時間波密度 P(x) で写像する（弱場の有効モデル）。
本Stepでは、その先の量子接続に向けて、

- 物質（粒子）＝束縛波（内部モード）
- 束縛波の安定条件（位相整合）が P(x) により変調され得る

という接続の形だけを固定する。

この段階での注意：
- 量子測定（確率・Born則）を導出したことは主張しない。
- 量子場（演算子）を再現したことは主張しない。
- まず「検出時刻（time-tag）が装置条件で変調され得る」という Step 7.4 の主張が成立するには、装置内部に **時間構造（遅延・経路差・応答）**があることが必要であり、
  その“内部自由度”を束縛波の言葉で接続する。

---

## 5. 次（Step 7.2 以降への接続点）

- Step 7.2：局所P構造による相関生成
  - 何を「相関」と呼び、どの段階で条件付き集合（post-selection）が入るかを定義する。
- Step 7.3：量子もつれの再解釈
  - “非局所”ではなく、局所P構造＋検出過程の時間構造で説明できる範囲を切り分ける。
- Step 7.4：ベル不等式
  - 同時計数窓 Δt、trial-based 定義、time-tag アルゴリズム依存性を、一次データで定量検証できる形に落とす。

