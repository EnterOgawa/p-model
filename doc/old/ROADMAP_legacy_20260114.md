# P-model 今後の進め方（時系列ロードマップ：旧版 2026-01-14）

目的：P-model（時間波密度 `P`）を「物質＝波」の前提で体系化し、**一次ソース＋不確かさ＋反証条件**つきで、第三者が判定可能な形まで積み上げる。

このロードマップの基本方針（“決定的”の定義）：
- **一次ソース優先**：観測値は可能な限り「一次データ」または「一次論文（定義が明確）」を採用し、参照日を残す。
- **Fit と Predict を分離**：パラメータ（β/δなど）を合わせた段階（fit）と、固定したまま他データへ外挿する段階（predict）を混ぜない。
- **不確かさを明示**：統計誤差だけでなく、系統誤差（定義差・校正・媒質・モデル依存）を章ごとに明記する。
- **反証条件を出す**：「この観測がこう出たらモデルが棄却される」を最低1つ提示する。

前提（本リポジトリの統一規約）：
- **質量近傍で `P` が増える**（`P>P0`）
- 重力：**`P` 勾配へ滑り落ちる**（`a = c^2 ∇ln(P/P0)`）
- 光：**高P側へ屈折**（`n(P)=(P/P0)^(2β), β>0` とし、光学経路長 `∫ n ds` の停留条件で光路が曲がる）

参照：`doc/P_model_handoff.md`、`AGENTS.md`、`doc/theory/01_all_matter_is_wave.md`、`doc/theory/03_quantum_field_vs_classical_wave.md`

---

## Phase 0（最優先）：公理・用語の固定（ブレない土台）

やること
- 「波が最短経路を好む」を、**幾何学的距離ではなく “波にとっての距離”**（例：光学経路長/位相の停留）として定義する。
- `P` / `P0` / `φ` / `n(P)` / `β` /（必要なら）`δ` の **意味・単位・適用範囲**を1枚に固定する。
- 「物質（束縛波）」「光（自由波）」の言葉の対応表を確定する。

出口条件
- 以後の資料・コードで、同じ記号が同じ意味で使われ続ける状態になる。

---

## Phase 1：最小理論の導出（“何がどこから出るか”を一本化）

やること
- 重力（運動方程式）、時計（`dτ/dt`）、光（`n(P)` と屈折/遅延）を、**同一の原理**（位相/作用の停留）から整合的に並べる。
- 弱場近似で **ニュートン極限**（`φ≈-GM/r`）と観測式（赤方偏移、Shapiro遅延、光の曲がり）への写像を整理する。
- PPN（特に `γ`）との対応を明文化し、既知拘束（Cassini）で自由度がどこまで残るかを固定する。

出口条件
- 「この仮定を置くと、この観測式が出る」がドキュメントとして追える状態になる。

---

## Phase 2：検証の再現性を固める（計算・入出力の標準化）

やること
- 既存検証（`gps` / `cassini` / `viking` / `mercury` / `llr`）を、`data/` → `scripts/` → `output/` のパイプラインで **ワンコマンド再現**できる形へ寄せる。
- 生成図・CSVのファイル名を固定し、差し替え運用にする（結果比較が容易になる）。
- 「入力データ」「パラメータ」「実行条件」を `output/<topic>/` に残す（ログ/メタデータ）。

出口条件
- 第三者が同じ出力（少なくとも同等の図・CSV）を再生成できる状態になる。

---

## Phase 3：観測検証を拡張（“置換可能”を支える必須セット）

優先順（弱場・静的 → 強い制約 → 追加）
1) **光伝播**：Shapiro遅延（Cassini/Viking）＋光の曲がり（太陽近傍の偏向）  
2) **時計**：重力赤方偏移（地上-衛星、可能なら地上実験）  
3) **軌道**：近日点移動（Mercury）＋二体の長期安定性（LLR等）
4) **強重力**：ブラックホール影サイズ（EHT: M87*, Sgr A* など）

出口条件
- 代表的な古典テスト群で、**同一パラメータセット（β/δ固定）**のまま整合を示せる状態になる。

---

## Phase 4：差分予測（“反証可能性”の提示）

やること
- GRと一致する領域／一致しない領域を宣言し、**差が出る観測量**を1〜2個に絞る。
- 既存データで即座に検証できる形（スクリプト＋出力）に落とす。
- 例：EHT（影直径係数の数%差）、速度飽和δ（γ_max≈1/√δ の上限が既知高γと矛盾しないか）

出口条件
- 「当たる/外れる」が第三者にとって判定可能な予測が出ている状態になる。

---

## Phase 5：論文化（論文の骨格→図表→文章）

やること
- 章立て（序論/理論/方法/結果/議論/結論）を固定し、`output/` の図表を参照して本文を組み立てる。
- 先行研究（GR/PPN/実験）と「どこが同じでどこが違うか」を明確化する。

出口条件
- 再現可能な計算・図表・定義が揃った、投稿可能な草稿になる。

---

## Phase 6：公開・投稿準備（品質保証＋配布固定）

やること
- 公開体裁の決定：論文HTML（publish）を正本とし、必要になったら LaTeX/PDF へ変換できる入口を用意する。
- 記号・定義・符号規約を「辞書ページ」として固定し、本文の参照先を一本化する。
- 各検証章（LLR/Cassini/Viking/Mercury/GPS/EHT）の **定型**（入力→処理→指標→図→注意）を統一する。
- 不確かさ（統計誤差＋系統誤差）の表を追加し、「どこまで言えるか」を明確にする。
- EHT は放射モデル等の系統誤差を含むため、扱いを精密化（κ、スピン、散乱、定義）して “整合性チェック＋差分予測” の位置付けを固定する。
- 追加検証（優先順位を明示）を必要最小限だけ実装し、同じレポート形式へ統合する。
- 配布パッケージ（成果物＋再現手順）を固定し、公開用の「入口」を明確にする。

出口条件
- 公開方針が文書化され、`output/summary/pmodel_paper.html` と `output/summary/pmodel_public_report.html` が同じ構成で更新できる。
- `doc/STATUS.md` / `doc/WORK_HISTORY.md` / `output/summary/work_history.jsonl` の運用で、進捗と再現性が追跡できる。

参照
- 公開・投稿方針：`doc/paper/40_publication_plan.md`

---

## Phase 7：決定的検証パック（パラメータ凍結 → 外挿 → 反証条件）

目的：単発の「合った/合わない」ではなく、**判定可能な手順**として P-model を提示する。
補助（手順のチェックリスト）：`doc/DECISIVE_PACK.md`

### Step 7.1：グローバルパラメータの凍結（β/δ）
やること
- β：Cassini（一次データ）など “PPN γ を強く拘束する” 観測で β を固定（fit）し、その後は固定する（predict）。
- δ：高γ観測（宇宙線/ν等）と矛盾しない **上限**として固定（測定値ではなく制約）。

出口条件
- `doc/STATUS.md` に **採用β/δ** と「採用根拠（一次ソース/拘束）」が固定される。

### Step 7.2：外挿（predict）で通す“必須セット”を増やす
やること（優先順）
1) 重力赤方偏移（地上実験/衛星実験）：観測 vs 予測（誤差棒）  
2) 光偏向：観測（代表値/可能なら系列） vs 予測  
3) 既存（Viking/Mercury/LLR/EHT）を **β固定**のまま再評価し、比較形式を統一
4) 総合スコアボード（全検証）：Table 1（全検証）を OK/要改善/不一致 の目安で俯瞰し、立ち位置を伝えやすくする（図＋JSON）。※混乱防止のためスコアボードはこの1枚に統一。

出口条件
- `output/summary/pmodel_public_report.html` の比較ボードが「観測/標準理論/モデル予測」を同じルールで提示できる。

### Step 7.3：反証条件（差が出る観測量）を1〜2本に絞って強化
やること
- EHT（影直径係数）や δ（速度飽和）など、差が出る量について「必要精度」「観測手順」「棄却条件」を明記。
- 可能なら「今ある公開データでの暫定判定」まで落とす。

出口条件
- 論文（publish）に「反証可能性（判別条件）」章があり、第三者が検証できる。

補足（実装の作業分解：推奨）
- 7.3.1 **判別対象の固定**：差が出る観測量を2本以内に固定（例：EHTの影直径係数、速度飽和δ）。
- 7.3.2 **必要精度の定量化**：3σで判別するのに必要な 1σ 精度を算出し、現状の誤差とギャップを可視化する。
- 7.3.3 **棄却条件の明文化**：観測値が出たときの「棄却/保留」の閾値（例：|z|>3）を明記する。
- 7.3.4 **成果物固定**：図＋JSONを固定名で出力し、論文HTMLと一般向けレポートに同じ形で埋め込む。
  - 例：`output/summary/decisive_falsification.(png|json)`

### Step 7.4：独立再現（再現スクリプト＋データ固定）
やること
- Web取得が必要なデータは `data/` に固定し、以後 `--offline` で再現できるようにする。
- “入口” を `scripts/summary/run_all.py --offline` と `paper_build.py --mode publish` に集約する。

出口条件
- 別環境でも同一の図表が再生成できる（少なくとも主要指標の一致）。

補足（実装の作業分解：推奨）
- 7.4.1 **offlineの成功条件を固定**：run_all の「必須/任意」タスクを明確化し、必須はオフラインで失敗しない状態へ。
- 7.4.2 **キャッシュの永続化**：オンライン取得結果（HORIZONS等）を破棄されない場所へ固定（原則 `data/`、必要なら `output/*/horizons_cache` を“入力扱い”として明記）。
- 7.4.3 **再現チェック**：`python -B scripts/summary/run_all.py --offline` の戻り値=0 を“公開入口”として STATUS に固定する。
- 7.4.4 **証跡**：生成UTC/入力マニフェスト/主要指標を残し、「同じ入力→同じ出力」を担保する。

---

## Phase 8：差分予測の拡張（“決定打”の探索と更新耐性）

目的：Phase 7 の「判定可能な手順」を土台に、GR と P-model を **より鋭く分けられる観測量**を見つけ、
「今は判別できないが、何が改善されれば判別できるか」を一次ソース＋誤差予算つきで固定する。

やること（推奨の優先順）

### Step 8.1：差分予測候補の棚卸し（2?3本に絞る）
- P-model と GR が“必ずズレる”観測量を候補として列挙し、
  - 一次ソースが入手可能か
  - 系統誤差が支配的か（支配項が明示できるか）
  - 3σ判別に必要な精度が現実的か
  の観点でスクリーニングする。
- 出力：候補一覧（表）＋必要精度ギャップ（図）を `output/summary/` へ固定名で出す。

### Step 8.2：EHT（ブラックホール影）を“判別実験”として成立させる
- 現状の EHT は「リング直径」を測るため、**κ（リング/シャドウ比）・散乱・スピン/傾斜**の系統が支配的になりやすい。
- 係数（平均直径）だけでなく、可能なら「形（非円形性/偏心）」などの追加観測量も候補に入れ、
  何が分かれば κ を固定できるか（または κ を含めて棄却できるか）を整理する。
- 出力：差分予測（Δ）と必要精度（σ_need）の更新版を `decisive_falsification.*` に反映する。

### Step 8.3：回転（フレームドラッグ/重力磁場）を必須要件として扱う
- 相対性理論の置換候補としては、回転質量の効果（例：Lense–Thirring）を説明できる必要がある。
- P-model に回転項を追加する方針（定義/近似/適用範囲）を理論章に追加し、
  既知の実験（例：GP-B, LAGEOS 等）での整合/差分予測を用意する（一次ソース優先）。

### Step 8.4：強重力（連星：二重パルサー）の準備
- 目的：代替理論で問題になりやすい **双極放射（dipole）**を避けつつ、観測が支持する **四重極放射（quadrupole）**を再現できるかを確認する。
- 優先ターゲット（一次ソースで数値確定 → 図化）：
  - PSR B1913+16（Hulse-Taylor）
  - PSR J0737−3039A/B（Double Pulsar）
- 実装（再現性）：
  - `Pdot_b(obs)` と `Pdot_b(GR)`（銀河加速度補正込みの値を優先）を一次ソースで確定し、
    **比 `Pdot_b(obs)/Pdot_b(GR)`** と誤差棒を固定名の図で出す。
  - “追加放射（dipole等）があり得る上限”を、観測とGRの差から簡易に定量化して併記する。

### Step 8.5：宇宙論（赤方偏移：背景P）を“観測量”へ接続する
- 最小仮定（`P(x,t)=P_bg(t)P_local(x)`、`1+z=P_em/P_obs`）を保ったまま、観測で用いられる距離指標（`D_L`/`D_A`）・時間伸長・表面輝度（Tolmanテスト）などの「定義」を明確化する。
- “宇宙膨張なし”の主張を置くなら、何が観測的に違うか（差分予測）を先に固定し、一次ソース＋誤差予算つきで反証可能にする。
- 出力：概念図（既存）に加え、「差が出る観測量」の一覧表と、現状の観測精度での棄却/保留の境界を `output/summary/` に固定名で出す。

補足（実装の作業分解：推奨）
- 実装の詳細は Phase 16（宇宙論（静的無限空間仮説））の Step 16.4 を正とする。
- 8.5.1 **BAO一次情報（銀河+random）で入口を作る（Stage A：スクリーニング）**
  - BAO圧縮出力（`D_M/r_d` 等）を「観測事実」扱いせず、銀河カタログ＋randomカタログから **`ξ(s,μ)→ξℓ` を再計算**して比較の入口を作る。
  - 座標化仕様（A0）を固定：`z` の定義（obs/cosmic/CMB）、LOS（pairwise-midpoint 等）、`D_M(z)` の積分/補間仕様、random抽出、重み、recon設定（使うなら符号/割当/マスク）を **metrics に保存**して議論がブレないようにする。
  - まず CMASS（z≈0.57; NGC+SGC合算）→ LOWZ（z≈0.32; 合算）→ z-bin（0.38/0.51/0.61）→ NGC/SGC分割、の順で「幾何が合う/合わない」をスクリーニングする。
- 8.5.2 **BAOピーク位置（smooth+peak）だけで幾何（ε）を評価（Stage A：スクリーニング）**
  - テンプレート全体一致ではなく「なめらか成分＋ピーク」モデルで、**ピーク位置（α）と異方（ε）**をまず見る（とくに ℓ=2 / wedge を重視）。
  - 誤差は Stage A では簡易（proxy/diag）でよいが、出力（ε, CI, 判定ルール）を固定し、スコアボードへ反映する。
- 8.5.3 **reconstruction を一次ソース仕様へ寄せる（Stage B：確証）**
  - Stage A は「幾何の入口」だが、決定打にするには recon 前提（境界/選択関数/LOS/RSD/格子割当）で結果が揺れない形へ寄せる必要がある。
  - 方針は2択： (A) 公式recon仕様に近い reconstruction を実装して再現性を上げる、または (B) recon 済みカタログ（一次入力）を用いて **距離写像だけ**差し替える（最短で Stage A→B を接続）。
- 8.5.4 **P(k) と eBOSS/DESI へ拡張（Stage B→）**
  - ξℓ だけでなく P(k) multipoles でもクロスチェックし、結果が面（統計量）に依存しないことを確認する。
  - 面白ければ eBOSS/DESI に拡張して、z依存の予言として差分を固定する。

### Step 8.6：重力波（LIGO/Virgo/KAGRA）を“位相（chirp）”で検証する
- 目的：振幅より **位相（周波数上昇の速さ＝chirp）**が強い制約を与える点を、一次データから再現できる形で示す。
- 優先ターゲット：
  - GW150914（最初の検出で、公開データと解説資源が豊富）
- 実装（再現性）：
  - GWOSC等の公開データを `data/gw/` にキャッシュし、`--offline` で同じ図が再生成できるようにする。
  - 簡易解析として、時間周波数トラック（f(t)）または f と df/dt の関係を抽出し、
    四重極放射のチャープ則（GRの標準式）と比較する（“位相が合う”ことを主役にする）。

### Step 8.7：動的P（放射・波動）を Theory（2.x）へ導入する
- 目的：二重パルサー（4.10）と重力波（4.11）を「棄却条件」ではなく、**P-modelの機構から再導出**できる形にする。
- 論文（体裁）の作業順序：**2.x（動的P） → 4.10（導出＋比較） → 4.11（式／波形比較）**。
- やること（Theory, 2.x）：
  - `P(x,t)` の動力学（時間依存）を導入し、静的極限で既存の `φ(P)`・`n(P)`・弱場近似へ戻ることを明示する。
  - 放射（遠方場）の定義：何が“放射成分”で、何が観測量（周波数・位相・エネルギー損失）に対応するかを固定する。
  - 代替理論で問題になりやすい **双極放射（dipole）**が出ない条件（同一加速度・保存則・多極展開の前提）を明文化する。

### Step 8.8：二重パルサー（4.10）を「棄却条件」→「導出＋比較」へ拡張する
- 目的：`Pdot_b(obs)/Pdot_b(GR)` の“上限評価”から進めて、P-model側で **Pdot_b（軌道減衰）を導出し、観測と直接比較**する。
- やること：
  - Step 8.7 の動的Pから、連星の放射（最低限：四重極）によるエネルギー損失と軌道周期変化（Pdot_b）を導く。
  - 観測側は一次ソースの補正（銀河加速度等）を明示し、P-model/GR/観測の比較（誤差棒つき）に統一する。
  - “追加放射（dipole等）の上限”は補助に下げ、**導出式→観測量→比較図**を主にする。

### Step 8.9：GW150914（4.11）を「位相fit」→「観測量の式（波形）比較」へ拡張する
- 目的：現状の `f(t)` 抽出→簡易fit（デモ）から進めて、P-model側の導出式を使って **観測量（位相/周波数/波形）を比較**できる形にする。
- やること：
  - Step 8.7 の動的Pから、連星合体の inspiral で観測される位相（chirp）・周波数進化（df/dt）を導く。
  - まずは “観測量” を固定：f(t)・df/dt・位相 φ(t)・strain h(t) のうち、どれを一次データから安定に比較するかを決める。
  - 可能なら GRの標準inspiral式（波形の位相）との **同一プロット上の比較**（一致/差の定量）へ進め、単なるパラメータfitの段階を卒業する。

出口条件
- 「差が出る観測量」が 1?2 本に絞られ、**棄却条件**（例：|z|>3）が一次ソース＋誤差予算つきで書かれている。
- その観測量について「現状のギャップ」と「ギャップを埋める支配誤差」が可視化され、将来データ更新時に差し替え評価できる。

---

## Phase 9：強場の横展開とロバスト性（多事例・一次ソース強化）

目的：
- Phase 8 までで整えた「一次ソース＋固定出力＋棄却条件」の枠組みを、**強場（GW/連星）で多事例に広げる**。
- “1例で合う”ではなく、**複数イベントでも同じ手順で比較できる**状態にし、モデルの適用範囲と限界を明確化する。

やること（推奨の優先順）：

### Step 9.1：重力波（GW）を多イベント対応へ拡張（安定指標）
- GWOSC 形式（event JSON → strain）を一般化し、イベント名を切り替えて同じ処理が走るようにする。
- “合う/合わない”を比較できるよう、match（正規化内積）等の指標を **定義固定**し、窓/帯域/前処理をメタデータとして保存する。

### Step 9.2：二重パルサー（軌道減衰）の導出を一次ソースへ寄せる
- 文献の R（観測/GR）を読むだけでなく、一次ソースの軌道要素/質量/補正から **Pdot_b の絶対値**を再計算し、
  観測 vs P-model（弱場四重極）を「導出→比較」へ寄せる（補正項の扱いを明示）。

### Step 9.3：宇宙論（Tolman 等）で“棄却条件”を補強（必要なら）
- Phase 8.5 の DDR に加え、Tolman 表面輝度などの一次ソース制約を取り込み、背景Pモデルの差分予測を **観測精度と同じ土俵**で評価する。

出口条件：
- GW：少なくとも 2イベントで同一手順の図＋JSON（固定名）を出せる（`--offline` 再現可能）。
- Pulsar：少なくとも 1 系で、一次ソースの入力（軌道要素等）から Pdot_b を再計算して比較できる（補正の内訳つき）。
- 必要なら Table 1 と論文に追記し、「多事例での整合/差」を読める形にする。

---

## Phase 10：多事例の追加強化（GW/放射制約の拡張）

目的：
- Phase 9 の最小達成（GW 2イベント、Pulsar 1系）を土台に、事例を増やして「同じ手順で回る」ことを強化する。
- “合う/合わない” を比較できるケースを増やし、適用範囲（どこまでの近似が通るか）と限界を明確化する。

やること（推奨の優先順）：

### Step 10.1：GW をさらに1イベント追加（例：GW170104）
- 既存の `scripts/gw/gw150914_chirp_phase.py --event <name>` の枠内で、追加イベントの出力（図＋metrics JSON）を固定名で保存し、Table 1 と論文へ反映する。
- `run_all --offline` でキャッシュから再現できること。

### Step 10.2：NS-WD 連星などを追加して放射の棄却を強化
- 双極放射などが出やすい系（中性子星＋白色矮星）を一次ソースで追加し、観測（Pdot_b補正）と弱場四重極の一致度/追加放射上限を同じ形式で出力する。

### Step 10.3：BNS（例：GW170817）も追加してロバスト性を確認（必要なら）
- BBH だけでなく BNS を追加し、帯域/窓/指標（R^2, match 等）の感度を確認する（必要ならイベント別の既定値を固定する）。

出口条件：
- GW：3イベント以上で同一手順の図＋JSON（固定名）を出せる（`--offline` 再現可能）。
- 放射制約：NS-WD など “双極が出やすい系” も含めて、追加放射上限を同形式で提示できる。

---

## Phase 11：強重力の品質改善（要約図・窓・指標の健全化）

目的：
- 強重力（GW/連星）で「多事例に回る」ようになった後、**指標の妥当性**（特に match が短窓で過大評価され得る点）を改善し、誤解しにくい形へ整える。
- “合う/合わない” の判断が、窓取り・前処理の偶然に左右されにくい状態へ寄せる。

やること（推奨の優先順）：

### Step 11.1：GW 要約図（多イベント）を追加して俯瞰を可能にする
- イベント×検出器で R^2 / match 等を一覧化し、傾向（イベント依存・検出器依存）を一目で見える化する。
- SNR/FAR 等のメタ情報を併記し、“強いイベントほどどうか” の傾向確認を可能にする。

### Step 11.2：BNS（例：GW190425）を追加してロバスト性を確認する
- BBH だけでなく BNS を追加し、帯域/窓/指標の感度を把握する（必要ならイベント別既定値を固定する）。

### Step 11.3：match の短窓過大評価を検知し、理由付きで省略/再計算する
- match 計算窓が短すぎる場合（サンプル数・時間長）を検知し、**match を省略（理由付き）**として出力する。

出口条件：
- GW の比較は「短窓で match=1.0 のような誤解」を避け、統一条件での俯瞰が可能になっている。
- 主要指標（R^2、match（省略含む））が JSON へ固定出力され、Table 1 や要約図で参照できる。

---

## Phase 12：GW 比較の標準化と拡張（イベント一覧駆動・offline 再現）

目的：
- GW 比較を「イベントを増やしても同じ手順で回る」形に標準化し、`--offline` 再現と品質管理（診断）を強化する。

やること（推奨の優先順）：

### Step 12.1：match 窓の周波数帯を固定（例：70–300 Hz）
- 指標が前処理条件に依存しすぎないよう、周波数帯・窓の既定値を固定し、メタデータとして出力する。

### Step 12.2：イベント一覧のデータ駆動化（event_list.json）
- イベント名・検出器・前処理等を JSON に集約し、追加/変更をコード差分最小で行えるようにする。
- 併せて診断（成功/失敗理由、検出器別集計）を出して“どこが弱いか”を見える化する。

### Step 12.3：GWTC-3 の BBH/NSBH などを追加し、online→offline 再現を確立
- 追加イベントの一次データ取得をキャッシュ化し、以後は `--offline` で再生成できる形にする。

出口条件：
- GW の追加は event_list の追記で回り、診断 JSON で品質が追跡できる。
- `run_all --offline` で主要イベントの図＋metrics JSON が failures=0 で再現できる。

---

## Phase 13：スコアボードの統一（全検証の“立ち位置”を伝わる形で固定）

目的：
- Table 1（全検証）と各章の図を、**1枚の俯瞰＋行ごとの判定（目安）**として固定し、第三者に「今どこまで通っているか」を伝えやすくする。
- “OK/要改善/不一致” の意味（しきい値）と例外（系統/モデル仮定）を明示し、誤解を減らす。

やること（推奨の優先順）：

### Step 13.1：Table 1 全行を OK/要改善/不一致/参考 に分類し、出力を固定する
- `output/summary/validation_scoreboard.json` に Table 1（全27行）の判定（目安）を含める。
- しきい値（σ/corr/RMSなど）を JSON の policy として固定し、出力に残す。

### Step 13.2：判定基準（policy）の見直しと例外規定（系統/仮定）を明文化する
- 宇宙論（進化系統が支配的）、EHT（κ/散乱/スピン系統が支配的）など、単純なしきい値では誤解しやすい項目の注意書きを固定する。

出口条件：
- 公開レポートで「全体の立ち位置」が短時間で把握でき、詳細は Table 1 と各章へ誘導できる。

---

## Phase 14：宇宙論（背景P）の方針確定（棄却の固定 or 静的無限空間での再接続）

目的：
- 距離二重性（DDR）/ Tolman 表面輝度の結果を、P-model の **適用範囲**として明確化する（現状は静的背景P最小モデルが強く棄却）。
- “棄却（反証）として固定する” のか、“最小拡張（進化/選択効果）で再接続を試す” のか、方針を決めて紙面と公開レポートへ反映する。

やること（推奨の優先順）：

### Step 14.1：静的背景P（最小モデル）の扱いを決め、反証条件として固定する
- DDR（ε0）と Tolman（n）の一次ソース制約を“棄却条件”として整理し、公開レポートでは結論を短く明示する。

### Step 14.2：静的無限空間を採る場合、距離指標の前提（標準光源/標準定規）を再導出して再評価する
- 背景Pにより「物理スケール（光度/定規/有効不透明度）が変わる」可能性を、観測で使う `D_L`/`D_A` の構成に落とし込み、必要な補正量（例：ηを(1+z)^Δεだけ押し上げる）を定量化する。
- 追加自由度の意味と限界（系統/モデル依存、距離到達限界の影響）を明示し、Table 1 とスコアボードへ反映する。
  - 14.2.1 **パラメータ空間の可視化**：不透明度 α / 光源進化 s_L / 定規進化 s_R の組合せで ε0 を回復できる領域（zスコア）を固定出力し、候補が一意でない点を明示する。
  - 14.2.2 **一次ソースで拘束を追加**：α（cosmic opacity）、SNIa の標準化/進化、BAO の定規校正（r_d）と系統の一次ソースを増やし、どの候補が現実的か（不確かさ込み）を判定できる材料を揃える。
  - 14.2.3 **独立プローブで相互検証**：SN time dilation、T(z)（CMB温度スケーリング）、Alcock-Paczynski など、距離指標の仮定と独立な観測で「同じ補正が矛盾しないか」をチェックし、棄却/保留の条件を強化する。

出口条件：
- 宇宙論は「現状の棄却/保留/再接続」の立場が明文化され、第三者が誤解しない。

---

## Phase 15：GW の品質改善（低R²イベントの原因切り分けと指標の堅牢化）

目的：
- GW の “合う/合わない” が、窓取り・前処理・データ品質の偶然に左右されないようにする。
- 低R²イベント（例：GW200311_115853 など）について、失敗理由を分類して改善余地を明確化する。

やること（推奨の優先順）：

### Step 15.1：低R²/fit_failed の原因分類を固定し、改善方針を定める
- event_list 診断（検出器別・理由別）を使い、周波数帯/窓/抽出法の既定値を調整する。

### Step 15.2：指標の意味を統一（R², match（省略含む）, 可能なら位相＋振幅）し、Table 1/要約図へ反映する
- “match の短窓過大評価” を引き続き避け、説明文とメタデータを固定する。

出口条件：
- GW の要約が「どの程度合っているか」を誤解なく伝えられ、イベント追加にも耐える。

---

## Phase 16：宇宙論（静的無限空間仮説）：張力の切り分けと BAO一次統計（galaxy+random）からの再導出

目的：
- 宇宙論は「距離指標依存（標準光源/定規）」と「距離指標と独立（時間伸長/T(z)/APなど）」が混線しやすいので、前提と系統を固定し、**張力（不一致）の原因**を切り分ける。
- BAOは圧縮出力（`D_M/r_d`, `D_H/r_d` など）を「観測事実」と見なさず、**銀河カタログ＋randomから相関関数（一次統計）を再計算**して、距離写像（LCDM vs P_bg等）をP-model側で差し替え可能な形にする。

やること（推奨の順）：

### Step 16.1：観測量ごとに「前提」と「系統」を固定（定義ブレを止める）
- 対象：距離（DDR）/表面輝度（Tolman）/時間伸長（SN time dilation）/ CMB温度スケーリング T(z) / AP / BAO
- 固定するもの：光子保存仮定、進化補正、校正、共分散の扱い、selection/再構成など。

### Step 16.2：背景P（静的無限）から観測量を再導出（GRの幾何学と機構を混ぜない）
- どの観測量が「P_bgの仮定」に敏感で、どれが独立かを整理し、論文の章立て（宇宙論I/II）へ反映する。

### Step 16.3：張力が“観測の到達限界/誤差予算”で隠せるか（z_limit）を固定
- `|Δμ(z)|` / `|τ(z)|` などで「必要補正」と「観測誤差予算」を同じ軸に載せ、棄却/保留の基準を明文化する。

### Step 16.4：BAO一次統計（galaxy+random）で“幾何が合うか”を判定（最重要）
- 方針：BOSS DR12v5 LSS の **recon済み銀河＋random**を出発点に、座標化（距離写像）だけを P-model 側で差し替えて比較する。
  - 16.4.1 **座標化仕様（A0）の固定**：`z` の定義（obs/cosmic/CMB）、LOS（global/pairwise）、`D_M(z)` の積分/補間仕様、重み、random抽出、recon設定を同じ粒度で固定し、出力へハッシュ同梱（混在検出）。
  - 16.4.2 **CMASS（z≈0.57）から開始**：NGC+SGC合算・post-recon ξ0/ξ2 を計算し、BAOピーク位置と異方（ℓ=2）を確認する。
  - 16.4.3 **LOWZ（z≈0.32）を追加**：同じ仕様で低zでも幾何が通るか確認する（いきなり z-bin にしない）。
  - 16.4.4 **z-bin（0.38/0.51/0.61）へ展開**：幾何の z 依存（ε(z)）を評価する本番に進む。
  - 16.4.5 **NGC vs SGC 分割**：系統切り分け（論文化で効く）として最後に実施する。
  - 16.4.6 **ピークfitは最小モデル**：まず「smooth成分＋ピーク」モデルで、`r_d` はフリー（全体スケールへ吸収）、異方（ℓ=2）重視の幾何整合（ε）で判定する。
  - 16.4.7 **公開一次統計でクロスチェック**：Ross（post-recon ξℓ）、Satpathy（pre-recon ξℓ）、Beutler（P(k)）を“入口”として保持し、catalog-based（Corrfunc）の正規化・形状・共分散の差を切り分ける。

### Step 16.5：合致しない場合の原因切り分け（観測起因 vs モデル起因）を固定
- 16.5.1 DDR一次ソース依存の俯瞰（距離指標で棄却度が動く）
- 16.5.2 DDRの支配仮定（校正/共分散/進化補正/幾何モデル）を切り分け
- 16.5.3 DDRのモデル差を系統幅として取り込み（頑健性再評価）
- 16.5.4 SNIa+BAO / SNIa+H(z) の系統幅を一次ソースで補う
- 16.5.5 DDR採用ポリシーを固定し、Table 1 / スコアボードへ反映（“代表＋σ_cat注記”）

出口条件：
- 宇宙論（静的無限仮説）の現状が「どの前提で」「どの観測が」「どれだけ」棄却/保留か、第三者が追える（原因が混線しない）。
- BAOは一次統計（galaxy+random）からの比較で、幾何の整合（ε）の結論が座標化仕様（A0）と切り分けられている。

---

## Phase 17：LLR：NGLR-1 を計測対象へ追加

目的：
- LLR の検証を「既存反射器」だけでなく、NGLR-1 を含む形へ拡張し、同じ手順（入力→処理→指標→図→注意）で再現可能にする。

やること（推奨の順）：

### Step 17.1：NGLR-1 の定義をデータへ取り込み（一次ソース固定）
- 反射器ID/位置/一次ソースを `data/llr/` に追加し、既存の reflector マッピングへ組み込む。

### Step 17.2：既存 LLR パイプラインで NGLR-1 を含む診断を出力
- CRD Normal Point の残差/RMS/診断図（例：仰角依存）を固定名で出力する。

### Step 17.3：Table 1 / スコアボードへ反映
- NGLR-1 を含む場合の指標と注意点（系統）を明記する。

出口条件：
- `python -B scripts/summary/run_all.py --offline` で NGLR-1 を含む LLR 図・指標が failures=0 で再現できる。

---

## Phase 18：量子もつれ（ベルテスト：CHSH）を検証可能な形へ落とす

目的：
- マクロ（宇宙物理）で固めた P-model（時間波密度P）の枠組みを、ミクロ（ベルテストの time-tag / coincidence 選別）へ拡張し、**差分予言＋反証条件**で第三者が判定できる形にする。
- 「ベル違反＝非局所性」の単一解釈に依存せず、観測手続き（同時計数選別）の物理的偏りとして説明できるかを検証する。

前提（注意）：
- 量子状態や「もつれ」の存在そのものを否定しない（解釈の代替を検証する）。
- 結論は **解析仕様（time-tag / coincidence アルゴリズム / Δt / trial定義）**に強く依存し得るため、BAOのA0（座標化仕様）と同様に **仕様を固定**してから比較する。

やること（推奨の優先順）：

### Step 18.1：一次データ（time-tag / event log）を選定・保全し、再現可能な入出力へ
- 公開されているベル実験データのうち、time-tag あるいは trial/event-ready が追える一次データを1セット選び、`data/quantum/bell/` に保存する。
- 出典・版・参照日・ライセンス・ファイルハッシュを `manifest.json` として固定する。

### Step 18.2：解析仕様（A0）の固定（議論をブレさせない）
- time-tag の定義：raw / 補正後 / clock同期処理の有無（採用した定義を固定）。
- coincidence ペアリング：Δt、nearest-neighbor、1対1制約、多重マッチ処理、境界条件、除外規則を固定。
- trial-based 定義：パルス番号 / event-ready / fixed window 等の採用方針を固定（対応できるデータセットを選ぶ）。
- 解析の最小単位（run/setting/bin）とフィルタ（欠損・飽和・deadtime）を固定。
- 上記を `analysis_spec`（JSON）として `output/quantum/` に保存し、`spec_hash` を全出力へ同梱する。

### Step 18.3：ベースライン再現（Sanity check）
- 公開論文が提示する CHSH（S）を、同一データ・同一仕様で再現し、再現できない限り先へ進まない（fail-fast）。

### Step 18.4：差分予言の検証（Sが time-tag に依存するか）
- 同時計数窓 Δt を掃引し、S(Δt) の系統変化を評価して固定出力する。
- coincidence-based と trial-based の定義を切替し、S の変化（または不変）を比較する。
- time-tag アルゴリズム（閾値/補間/分解能）を変えたときの S の安定性を評価する。
- 可能なら片側遅延（光路/電子）を導入した公開データ（または自前実験ログ）で非対称変化を検証する。

### Step 18.5：P-model最小モデル（time-tag変調＋選別）で数値シミュレーション
- 「P × 装置条件 → 有効遅延」が setting に依存して time-tag をシフトし得る最小モデルを実装し、S(Δt) の形状（傾き/飽和）を予言する。
- 観測（一次データ）と同じ選別アルゴリズムを通し、説明可能な範囲（パラメータの上限）を定量化する。

### Step 18.6：反証条件（棄却基準）の固定とスコアボード統合
- 反証条件（例）：
  - Δtを十分広く変えてもSが不変
  - trial-based にしてもSが同一
  - 片側遅延や time-tag アルゴリズム変更でもSが安定
- 上を「棄却条件」として明文化し、Table 1 / 総合スコアボードへ追加する。

出力（固定名）：
- `output/quantum/bell_chsh_sweep.png`（S(Δt)）
- `output/quantum/bell_chsh_sweep_metrics.json`（S, CI, counts, spec_hash）
- `output/quantum/bell_spec.json`（analysis_spec）

参照：
- `doc/quantum/P-model_BellTest_AI_Brief.md`

## ブロック中/保留（ロードマップ外）

一次データ未公開などの理由で「今は進めないが、準備は維持する」テーマは `doc/BLOCKED.md` にまとめる。
