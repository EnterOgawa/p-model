{
  "generated_utc": "2026-01-24T02:53:20.477396+00:00",
  "phase": {
    "phase": 6,
    "step": "6.2.1",
    "name": "弱場統合I/F固定"
  },
  "purpose": "弱場（太陽系）テストを長期・多系統で統合するために、対象テスト、入力、推定量、補正（knobs）、再現コマンド、主要出力の一覧（統合I/F）を固定する。",
  "policy": {
    "fit_predict_separation": true,
    "beta_frozen_across_tests": true,
    "note": "Phase 6.2 は『弱場の逃げ道封鎖』として、同一βなどの凍結パラメータを前提に長期・多系統で自己矛盾しないことを確認する。"
  },
  "common": {
    "frozen_parameters": {
      "path": "output/public/theory/frozen_parameters.json",
      "exists": true,
      "beta": 1.0000105000000001,
      "beta_sigma": 1.15e-05,
      "gamma_pmodel": 1.0000210000000003,
      "gamma_pmodel_sigma": 2.3e-05,
      "delta": 1e-60,
      "policy": {
        "fit_predict_separation": true,
        "beta_source": "cassini2003",
        "delta_source": "output/public/theory/delta_saturation_constraints.json",
        "note": "Phase 7（決定的検証パック）では、ここで凍結したβ/δを以後固定して外挿（predict）する。"
      }
    }
  },
  "tests": [
    {
      "id": "cassini_sce1_doppler",
      "topic": "cassini",
      "name": "Cassini SCE1（太陽会合）: ドップラー y(t)",
      "observable": {
        "name": "two-way fractional frequency y(t)",
        "unit": "dimensionless"
      },
      "period": {
        "kind": "event_window",
        "label": "SCE1（Fig.2 window）",
        "note": "主に ±10日（zoom）と全期間（full）で比較。期間は cassini_fig2_overlay.py の設定で管理。"
      },
      "inputs": [
        {
          "path": "output/public/cassini/cassini_shapiro_y_full.csv",
          "required": true,
          "exists": true,
          "note": "幾何（Earth/Cassini ベクトル由来）のモデルCSV。再生成にはネットワーク（HORIZONS）が必要。"
        },
        {
          "path": "data/cassini/pds_sce1/",
          "required": true,
          "exists": true,
          "note": "PDS一次データ（SCE1 TDF/ODF）キャッシュ。"
        },
        {
          "path": "data/cassini/cassini_fig2_digitized_raw.csv",
          "required": false,
          "exists": true,
          "note": "論文 Fig.2 のデジタイズ点列（参考/フォールバック）。"
        }
      ],
      "scripts": [
        {
          "path": "scripts/cassini/cassini_fig2_overlay.py",
          "role": "main_offline",
          "exists": true,
          "repro": "python -B scripts/cassini/cassini_fig2_overlay.py --beta <frozen>",
          "note": "PDS TDFの疑似残差から y(t) を復元し、モデルと重ね合わせ。"
        },
        {
          "path": "scripts/cassini/cassini_shapiro_y_full.py",
          "role": "optional_online",
          "exists": true,
          "repro": "python -B scripts/cassini/cassini_shapiro_y_full.py --beta <frozen>",
          "note": "幾何CSVの再生成（HORIZONSアクセスが必要）。"
        }
      ],
      "outputs": [
        {
          "path": "output/public/cassini/cassini_fig2_overlay_full.png",
          "exists": true,
          "note": "観測 vs モデル（全期間）"
        },
        {
          "path": "output/public/cassini/cassini_fig2_overlay_zoom10d.png",
          "exists": true,
          "note": "観測 vs モデル（±10日）"
        },
        {
          "path": "output/public/cassini/cassini_fig2_residuals.png",
          "exists": true,
          "note": "残差（観測-モデル）"
        },
        {
          "path": "output/public/cassini/cassini_fig2_metrics.csv",
          "exists": true,
          "note": "RMSE/MAE/corr 等の指標"
        },
        {
          "path": "output/public/cassini/cassini_fig2_run_metadata.json",
          "exists": true,
          "note": "実行条件・入力・パラメータ"
        },
        {
          "path": "output/public/cassini/cassini_beta_sweep_rmse.csv",
          "exists": true,
          "note": "βスイープのRMSE"
        },
        {
          "path": "output/public/cassini/cassini_beta_sweep_rmse.png",
          "exists": true,
          "note": "βスイープの可視化"
        }
      ],
      "frozen_parameters_policy": {
        "beta": "Use output/public/theory/frozen_parameters.json (no per-dataset retuning).",
        "note": "Cassini は β 拘束の主力。Phase 6.2 では長期・多系統でも同一βで自己矛盾しないことを確認する。"
      },
      "systematics_knobs": [
        {
          "key": "source",
          "values": [
            "pds_tdf",
            "pds_tdf_raw",
            "digitized",
            "pds_odf_raw"
          ],
          "note": "観測系列の取り方"
        },
        {
          "key": "tdf_bin_seconds",
          "default": 3600,
          "note": "TDF binning"
        },
        {
          "key": "tdf_detrend_poly_order",
          "default": 0,
          "note": "detrend polynomial order"
        },
        {
          "key": "tdf_detrend_exclude_inner_days",
          "default": 5.0,
          "note": "中心部を除外してdetrend"
        },
        {
          "key": "tdf_reconstruct_shapiro",
          "default": true,
          "note": "疑似残差 + 参照Shapiroの足し戻し"
        },
        {
          "key": "tdf_y_sign",
          "default": 1,
          "note": "TDF定義により符号反転が必要な場合がある"
        }
      ],
      "refs": []
    },
    {
      "id": "viking_shapiro_peak",
      "topic": "viking",
      "name": "Viking（地球-火星）: Shapiro遅延（代表ピーク）",
      "observable": {
        "name": "two-way Shapiro delay (peak)",
        "unit": "microsecond"
      },
      "period": {
        "kind": "scan_window",
        "label": "指定 start/stop/step のスキャン",
        "note": "現段階では観測時系列は未導入で、文献の代表ピーク（約250 μs）と比較する。"
      },
      "inputs": [],
      "scripts": [
        {
          "path": "scripts/viking/viking_shapiro_check.py",
          "role": "main",
          "exists": true,
          "repro": "python -B scripts/viking/viking_shapiro_check.py --beta <frozen> [--start ... --stop ... --step ...]",
          "note": "HORIZONS幾何から Shapiro 遅延を計算し、CSVを生成。"
        },
        {
          "path": "scripts/viking/update_slides.py",
          "role": "optional",
          "exists": true,
          "repro": "python -B scripts/viking/update_slides.py",
          "note": "結果図をスライドへ反映。"
        }
      ],
      "outputs": [
        {
          "path": "output/public/viking/viking_shapiro_result.csv",
          "exists": true,
          "note": ""
        },
        {
          "path": "output/public/viking/viking_p_model_vs_measured_no_arrow.png",
          "exists": true,
          "note": ""
        }
      ],
      "systematics_knobs": [
        {
          "key": "start/stop/step",
          "note": "期間スキャン（幾何ピークの取り方も含む）"
        },
        {
          "key": "offline",
          "note": "HORIZONSキャッシュの有無（--offline または HORIZONS_OFFLINE=1）"
        }
      ],
      "refs": []
    },
    {
      "id": "mercury_perihelion_precession",
      "topic": "mercury",
      "name": "水星：近日点移動（簡易数値積分）",
      "observable": {
        "name": "perihelion shift",
        "unit": "arcsec/century (derived)"
      },
      "period": {
        "kind": "simulation",
        "label": "fixed configuration",
        "note": "簡易モデル（精密暦ではない）。"
      },
      "inputs": [],
      "scripts": [
        {
          "path": "scripts/mercury/mercury_precession_v3.py",
          "role": "main_offline",
          "exists": true,
          "repro": "python -B scripts/mercury/mercury_precession_v3.py",
          "note": "簡易数値積分で近日点移動を可視化。"
        }
      ],
      "outputs": [
        {
          "path": "output/public/mercury/mercury_orbit.png",
          "exists": true,
          "note": ""
        },
        {
          "path": "output/public/mercury/mercury_precession_metrics.json",
          "exists": true,
          "note": "数値（角秒/世紀など）"
        },
        {
          "path": "output/public/mercury/mercury_perihelion_shifts.csv",
          "exists": true,
          "note": "周回ごとの累積値"
        }
      ],
      "systematics_knobs": [
        {
          "key": "unmodeled_perturbations",
          "note": "他惑星摂動/太陽四重極/小天体摂動等を入れていない限界を明示"
        }
      ],
      "refs": []
    },
    {
      "id": "gps_satellite_clock",
      "topic": "gps",
      "name": "GPS：衛星時計（IGS精密クロック vs BRDC/P-model）",
      "observable": {
        "name": "clock residuals (IGS - model)",
        "unit": "ns"
      },
      "period": {
        "kind": "daily",
        "label": "default: 2025-10-01 (DOY=274; GPS Week 2386)",
        "note": "別日に切替可能（fetch_igs_bkg.py）。"
      },
      "inputs": [
        {
          "path": "data/gps/BRDC00IGS_R_20252740000_01D_MN.rnx",
          "required": true,
          "exists": true,
          "note": "RINEX NAV（固定ファイル名）"
        },
        {
          "path": "data/gps/IGS0OPSFIN_20252740000_01D_15M_ORB.SP3",
          "required": true,
          "exists": true,
          "note": "IGS orbit (SP3; 固定ファイル名)"
        },
        {
          "path": "data/gps/IGS0OPSFIN_20252740000_01D_05M_CLK.CLK",
          "required": true,
          "exists": true,
          "note": "IGS clock (CLK; 固定ファイル名)"
        }
      ],
      "scripts": [
        {
          "path": "scripts/gps/fetch_igs_bkg.py",
          "role": "optional_online",
          "exists": true,
          "repro": "python -B scripts/gps/fetch_igs_bkg.py --date YYYY-MM-DD",
          "note": "IGS/BKG から取得して data/gps の既定ファイル名へ保存。"
        },
        {
          "path": "scripts/gps/compare_clocks.py",
          "role": "main_offline",
          "exists": true,
          "repro": "python -B scripts/gps/compare_clocks.py",
          "note": "IGS CLK に対して BRDC と P-model を比較（dt_rel除去を含む）。"
        },
        {
          "path": "scripts/gps/plot.py",
          "role": "postprocess",
          "exists": true,
          "repro": "python -B scripts/gps/plot.py",
          "note": "残差図と summary 指標を生成。"
        }
      ],
      "outputs": [
        {
          "path": "output/public/gps/summary_batch.csv",
          "exists": true,
          "note": "衛星ごとのRMSなど"
        },
        {
          "path": "output/public/gps/gps_clock_residuals_all_31.png",
          "exists": true,
          "note": "全衛星重ね描き"
        },
        {
          "path": "output/public/gps/gps_residual_compare_G01.png",
          "exists": true,
          "note": "G01例"
        },
        {
          "path": "output/public/gps/gps_rms_compare.png",
          "exists": true,
          "note": "全衛星RMS比較"
        },
        {
          "path": "output/public/gps/gps_relativistic_correction_G02.png",
          "exists": true,
          "note": "dt_rel（近日点効果）比較"
        },
        {
          "path": "output/public/gps/gps_compare_metrics.json",
          "exists": true,
          "note": "指標JSON（Table 1入力）"
        }
      ],
      "systematics_knobs": [
        {
          "key": "ref_include_earth_rotation",
          "note": "地上基準点速度に地球自転を含める（--ref-include-earth-rotation）"
        },
        {
          "key": "no_sat_earth_rotation",
          "note": "衛星速度の ω×r 補正を無効化（--no-sat-earth-rotation; デバッグ）"
        },
        {
          "key": "file_naming",
          "note": "固定ファイル名で回す（別日に切替する場合は同名差替え or compare_clocks.py編集）"
        }
      ],
      "refs": []
    },
    {
      "id": "llr_batch",
      "topic": "llr",
      "name": "LLR：バッチ検証（複数局×複数反射器）",
      "observable": {
        "name": "range residuals (obs - model)",
        "unit": "ns / m (derived)"
      },
      "period": {
        "kind": "multi_year",
        "label": "EDC月次NP2（拡張可能）",
        "note": "coverage（局/年/反射器）偏りを明示し、外れ値に敏感な統計を運用で固定する。"
      },
      "inputs": [
        {
          "path": "data/llr/llr_edc_batch_manifest.json",
          "required": false,
          "exists": true,
          "note": "EDCバッチ取得マニフェスト"
        },
        {
          "path": "data/llr/edc/",
          "required": false,
          "exists": true,
          "note": "EDC取得データ（キャッシュ）"
        },
        {
          "path": "data/llr/llr_primary.np2",
          "required": false,
          "exists": true,
          "note": "解析既定入力（単体overlay等）"
        },
        {
          "path": "data/llr/stations/",
          "required": false,
          "exists": true,
          "note": "観測局 site log キャッシュ"
        },
        {
          "path": "data/llr/reflectors_de421_pa.json",
          "required": false,
          "exists": true,
          "note": "反射器座標（PA）"
        },
        {
          "path": "data/llr/kernels/naif/",
          "required": false,
          "exists": true,
          "note": "SPICE kernels（MOON_PA_DE421 等）"
        }
      ],
      "scripts": [
        {
          "path": "scripts/llr/fetch_llr_edc_batch.py",
          "role": "optional_online",
          "exists": true,
          "repro": "python -B scripts/llr/fetch_llr_edc_batch.py",
          "note": "EDC（月次NP2）を一括取得し data/llr/edc/ にキャッシュ。"
        },
        {
          "path": "scripts/llr/llr_batch_eval.py",
          "role": "main",
          "exists": true,
          "repro": "python -B scripts/llr/llr_batch_eval.py --offline --chunk 50",
          "note": "複数局×複数反射器でP-model残差を評価（Horizonsキャッシュ運用）。"
        },
        {
          "path": "scripts/llr/llr_pmodel_overlay_horizons_noargs.py",
          "role": "single_overlay",
          "exists": true,
          "repro": "python -B scripts/llr/llr_pmodel_overlay_horizons_noargs.py",
          "note": "単体の重ね合わせ（入力は data/llr/llr_primary.* を優先）。"
        }
      ],
      "outputs": [
        {
          "path": "output/public/llr/llr_falsification_pack.json",
          "exists": true,
          "note": "public pack (citable)"
        },
        {
          "path": "output/public/llr/llr_shapiro_ablations_overall.png",
          "exists": true,
          "note": "key audit figure"
        }
      ],
      "systematics_knobs": [
        {
          "key": "time_tag_mode",
          "note": "tx/rx/mid/auto（局別最適を採用するか）"
        },
        {
          "key": "outlier_policy",
          "note": "MADベース外れ値除外（ns級で必須）"
        },
        {
          "key": "station_metadata_source",
          "note": "pos+eop vs site log 等"
        },
        {
          "key": "include_daily",
          "note": "月次と日次の重複排除（include_daily=true時）"
        }
      ],
      "refs": []
    }
  ],
  "outputs": {
    "weak_field_test_matrix_json": "output/public/weak_field/weak_field_test_matrix.json"
  }
}
